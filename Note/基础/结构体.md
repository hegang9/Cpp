# 结构体、联合体与枚举

## 结构体

### 结构体定义与初始化

```cpp
struct Student {
    string name;
    int age;
};

// 初始化方式
Student student = { "hegang", 20 };
Student student1{ "xiaoming", 40 };
Student student2{};  // 空初始化所有变量均为 "0"
```

### 结构体赋值

结构体之间赋值会复制所有变量的值。

```cpp
student2 = student;
```

### 结构体数组

```cpp
Student array[3] = { student, student1, student2 };
for (Student& item: array) {
    cout << item.name << " " << item.age << endl;
}
```

## 联合体（共用体）

### 基本联合体

联合体中的成员共享内存空间。

```cpp
union Num {
    int i_val;
    double d_val;  // 这两个变量的地址相同
};

Num num;
num.d_val = 1.2;
num.i_val = 1;
```

### 匿名共用体

```cpp
struct People {
    union {  // 匿名共用体
        int i_val;
        double d_val;  // 这两个变量的地址相同
    };
};
```

## 枚举

### 枚举定义与使用

```cpp
enum E { red = 1, green = 4, black = 6, yellow = 7 };

E band;
band = red;
// band = 0;  // 错误，在不进行强制类型转换时，只能将枚举量赋值给枚举变量
```

### 枚举与整数转换

- 枚举量可以提升为 int
- int 只能通过强制类型转换下降至枚举量

```cpp
int color_num = red;  // 枚举量可以提升为 int

E band1;
band1 = E(5);
cout << band1 << endl;

band1 = E(100);  // 超出枚举合法范围，属于未定义行为，但不会报错
cout << band1 << endl;
```

### 作用域内枚举

注意：与传统枚举量不同，作用域内枚举量不能隐式转换为整型。

```cpp
enum class egg { small, large };
enum class Tshirt { small, large };
```
