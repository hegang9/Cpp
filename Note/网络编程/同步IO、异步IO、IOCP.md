## 同步io和异步io

#### 同步io：
io函数在调用后，立刻就可以获取IO操作的结果。比如用户调用read后，线程阻塞等待直到read返回结果。

#### 异步io：
io函数在调用后，不能立刻就可以获取IO操作的结果。还是以read为例，用户调用read后，不等待，继续执行，IO操作完成后由内核系统通知用户，通知方式包括：

| 通知方式                  |工作原理                                                                                          | 适用平台 | 特点                                                                                    |
| ------------------------- | -------------------------------------------------------------------------------------------------- | -------- | --------------------------------------------------------------------------------------- |
| 信号(signal)              | 内核向进程发送一个特定的信号来通知IO完成                                                           | 类Unix   | 实现简单，但信号可能丢失，需要考虑重入性                                                |
| 异步I/O(AIO)              | 应用进程通过专门的AIO接口(如aio_read)提交请求，并通过结构体(如struct aiocb)指定通知方式            | 类Unix   | 功能相对完备，但复杂                                                                    |
| I/O完成端口(IOCP)         | 内核对象，管理一个完成队列。工作线程池通过GetQueuedCompletionStatus函数从端口取走已完成I/O的信息。 | Windows  | Windows下性能和扩展性最佳的高并发模型，实现了请求发起与处理的完全解耦                   |
| 可提醒I/O (Alertable I/O) | 利用线程特有的异步过程调用（APC）队列。I/O完成后，回调函数被加入队列，线程进入“可提醒状态”时执行。 | Windows  | 通知与发起I/O的特定线程绑定。适用于需要线程关联性的场景，但若该线程繁忙，回调可能被延迟 |


## IOCP
一种异步io的完成端口，步骤如下：
1. 创建完成端口(一个先进先出的队列)
2. 创建监听socket，绑定到完成端口上
3. 创建工作线程，将完成端口传递到工作线程